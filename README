README 

PAM-script has been written by Jeroen Nijhof <jnijhof@nijhofnet.nl>

Description:
	PAM-script allows you to execute scripts during authorization,
	passwd changes, or session opening or closing.

	So if you need extra work done after login you can use this pam
	module to execute a session script.

Options to pam_script.so:
	onerr=(success|fail) - default behaviour if the module can not find
	or execute the various pam-scripts.  The default is 'success'.

Module-type and Scripts:
	auth:		pam_script_auth		- username/password handshake
	account:	(none)			- non-auth account management
	session:	pam_script_ses_open	- actions performed before and
			pam_script_ses_close	  after a session
	passwd:		pam_script_passwd	- changing a password
	

Pam.conf example:

	--- start pam.conf ---
	ssh auth	required	pam_script.so
	ssh session	required	pam_script.so
	ssh passwd	required	pam_script.so
	--- end pam.conf ---

or as an extra step (here pam_script.so is optional because this application
does some extra logging and don't want access denied if there is a problem):

	--- start pam.conf ---
	ssh auth	required	pam_unix.so
	ssh auth	optional	pam_script.so
	ssh session	required	pam_unix.so
	ssh session	optional	pam_script.so
	ssh passwd	required	pam_unix.so
	ssh passwd	optional	pam_script.so
	--- end pam.conf ---

This example application has the pam_script_auth script check a database
and return non-zero if the user should not be granted access.  If the
script does not exist or is not executable at all levels (chmod a+x)
then deny access.
	ssh auth	required	pam_unix.so
	ssh auth	required	pam_script.so onerr=fail

Debugging:
Get the pamtest.c program from the pam-dotfile distribution and it can be
used to step through the module.

Problem/BUGS report:
If you find any bugs or problems just mail me
	Jeroen Nijhof <jnijhof@nijhofnet.nl>

